{"version":3,"sources":["assets/js/hero.js"],"names":["$","document","ready","imageBackground","vegas","slides","option_hero_background_image_path","delay","transitionDuration","timer","sliderBackground","option_hero_background_slider_path","transition","option_hero_background_slider_transition","option_hero_background_slider_delay","option_hero_background_slider_transitionDuration","firstTransitionDuration","walk","index","slideSettings","cycle","kenburnsBackground","option_hero_background_kenburns_path","option_hero_background_kenburns_transition","option_hero_background_kenburns_delay","option_hero_background_kenburns_transitionDuration","animation","youtubeBackground","option_hero_background_youtube_controls","append","option_hero_background_youtube_mute","removeClass","addClass","option_hero_background_youtube_loop","attr","mb_YTPlayer","click","hasClass","YTPUnmute","YTPMute","stBtnCheck","on","YTPPause","YTPPlay","colorBackground","css","option_hero_background_color_custom_color","children","remove","gradientBackground","colors","option_hero_background_gradient_colorArray","step","selector","colorIndices","gradientSpeed","option_hero_background_gradient_stransitionSpeed","updateGradient","c0_0","c0_1","c1_0","c1_1","istep","r1","Math","round","g1","b1","color1","r2","g2","b2","color2","background","floor","random","length","setInterval","canvasSphereBackground","SCREEN_WIDTH","width","SCREEN_HEIGHT","height","mouseX","mouseY","windowHalfX","window","innerWidth","windowHalfY","innerHeight","camera","scene","renderer","init","animate","container","separation","amountX","amountY","particles","particle","createElement","getElementById","appendChild","THREE","PerspectiveCamera","position","z","option_hero_background_sphere_distance","Scene","CanvasRenderer","setPixelRatio","devicePixelRatio","setSize","domElement","setClearColor","option_hero_background_sphere_background_color","PI2","PI","material","SpriteCanvasMaterial","color","option_hero_background_sphere_dot_color","program","context","beginPath","arc","fill","i","Sprite","x","y","normalize","multiplyScalar","scale","add","geometry","Geometry","vertex","Vector3","vertices","push","vertex2","clone","line","Line","LineBasicMaterial","option_hero_background_sphere_line_color","opacity","addEventListener","onDocumentMouseMove","onDocumentTouchStart","onDocumentTouchMove","onWindowResize","aspect","updateProjectionMatrix","event","clientX","clientY","touches","preventDefault","pageX","pageY","requestAnimationFrame","render","lem","lookAt","rotation","option_hero_background_sphere_rotation_speed","scroll","scrollTop","canvasWavesBackground","SEPARATION","option_hero_background_waves_dotSpacing","AMOUNTX","option_hero_background_waves_dotAmountX","AMOUNTY","option_hero_background_waves_dotAmountY","count","option_hero_background_waves_distance","Array","option_hero_background_waves_dot_color","ix","iy","option_hero_background_waves_background_color","sin","meshBackground","c","ctx","w","h","spacing","spread","basePoint","rightPoint","botPoint","mouse","mouseMoved","cols","rows","points","tick","Point","opt","xBase","yBase","offset","rand","duration","range","dir","rad","prototype","cos","angle","angleTo","min","max","dist","p1","p2","dx","dy","sqrt","atan2","getContext","reset","loop","create","strokeStyle","option_hero_background_mesh_color","lineWidth","forEach","point","draw","clearRect","moveTo","lineTo","stroke","fillStyle","save","translate","rotate","rect","restore","grad","createRadialGradient","option_hero_background_mesh_spotlight_size","addColorStop","fillRect","mousemove","e","option_hero_background_mesh_background_color","spaceBackground","undefined","Starfield","el","options","$el","that","isPlaying","isInited","canCanvas","animId","lastTime","vendors","cancelAnimationFrame","callback","element","currTime","Date","getTime","timeToCall","id","setTimeout","clearTimeout","defaults","starColor","option_hero_background_star_star_color","bgColor","option_hero_background_star_background_color","mouseMove","mouseColor","mouseSpeed","speed","option_hero_background_space_star_speed","quantity","option_hero_background_space_star_amount","ratio","divclass","resizer","oldStar","star","initW","canvas","initH","ratX","ratY","n","star_ratio","settings","extend","url","location","href","parseInt","indexOf","substring","flag","test","star_color_ratio","star_x_save","star_y_save","star_speed","star_speed_save","cursor_x","cursor_y","mouse_x","mouse_y","canvas_x","canvas_y","canvas_w","canvas_h","fps","desktop","navigator","userAgent","match","orientationSupport","DeviceOrientationEvent","portrait","canvasInit","wrapper","appendTo","starz","starInit","anim","closePath","move","doc","documentElement","handleOrientation","handleMousemove","beta","gamma","scrollLeft","clientLeft","clientTop","stop","start","fn","starfield","each","jQuery","abstractBackground","bgInterval","top","WebkitTransition","option_hero_background_abstract_bg_color","clearInterval","MESH","option_hero_background_width","depth","segments","slices","xRange","option_hero_background_width_expansion","yRange","zRange","ambient","diffuse","option_hero_background_move_speed","LIGHT","xyScalar","zOffset","gravity","dampening","minLimit","maxLimit","minDistance","maxDistance","autopilot","bounds","FSS","randomInRange","RENDER","now","center","attractor","output","mesh","canvasRenderer","gui","autopilotController","initialise","createRenderer","createScene","createMesh","createLights","addEventListeners","resize","offsetWidth","offsetHeight","setRenderer","removeChild","clear","Plane","Material","Mesh","v","anchor","time","PIM2","l","light","lights","Light","ambientHex","format","diffuseHex","mass","velocity","acceleration","force","ring","createElementNS","SVGNS","setAttributeNS","core","set","halfWidth","halfHeight","update","ox","oy","oz","copy","setZ","D","clamp","distanceSquared","F","subtractVectors","normalise","limit","segmentWidth","sliceHeight","dirty","lx","ly","onMouseMove","subtract","left","screen","initialize","randomize","getRndColor","glitchBackground","bgImage","option_hero_background_glitch_image","mgGlitch","destroy","glitch","blend","blendModeType","glitch1TimeMin","glitch1TimeMax","glitch2TimeMin","glitch2TimeMax","zIndexStart","checkforBackgroundEffects","option_hero_gravity_effect","gravityBackgroundEffect","loadScript","head","getElementsByTagName","script","type","src","onreadystatechange","onload","option_hero_background_mode","browser","mobile","customBackground","alert","console","log","option_hero_parallax_hover_effect","$scene","parallax","scalarX","scalarY","frictionX","frictionY","hover","Constellation","screenpointSplitt","movingSpeed","viewportWidth","viewportHeight","nbCalculated","$canvas","distance","radius","stars","config","Star","vx","vy","iStar","jStar","j","createStars","splice","setCanvas","hasOwnProperty","bind","constellation","waitForFinalEvent","timers","ms","uniqueId","cycleDuration","cycleDelay","fx","timeout","autoHeight"],"mappings":"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","file":"hero.35044014.map","sourceRoot":"..","sourcesContent":["/******************************************************************\r\n\t\r\n\t\r\n\t@ Item          Gravity // Coming Soon - Under Construction\r\n\t@ Version       3.4.4\r\n\t@ Author\t\tAvanzare\r\n\t@ Website\t\thttp://themeforest.net/user/avanzare \r\n\t\r\n\r\n ******************************************************************/\r\n\r\n\r\n/******************************************************************\r\n\r\n\r\n   ------------------------\r\n   -- TABLE OF CONTENTS --\r\n   ------------------------\r\n\t\r\n   --  1. Backgrounds\r\n   --  2. Effects\r\n   --  3. Cycle\r\n \r\n \r\n******************************************************************/\r\n\r\n\r\n\r\n\r\n/** 1. BACKGROUNDS\r\n*******************************************************************/\r\n\r\n$(document).ready(function () {\r\n\t\"use strict\";\r\n\r\n\r\n\r\n\t// IMAGE BACKGROUND FUNCTION\r\n\tfunction imageBackground() {\r\n\r\n\t\t// INIT VEGAS SLIDESHOW PLUGIN\r\n\t\t$(\".bg-image\").vegas({\r\n\r\n\t\t\tslides: option_hero_background_image_path,\r\n\t\t\tdelay: 6000,\r\n\t\t\ttransitionDuration: 800,\r\n\t\t\ttimer: false,\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// SLIDER BACKGROUND FUNCTION\r\n\tfunction sliderBackground() {\r\n\r\n\t\t// INIT VEGAS SLIDESHOW PLUGIN\r\n\t\t$(\".bg-image\").vegas({\r\n\r\n\t\t\tslides: option_hero_background_slider_path,\r\n\t\t\ttransition: option_hero_background_slider_transition,\r\n\t\t\tdelay: option_hero_background_slider_delay,\r\n\t\t\ttransitionDuration: option_hero_background_slider_transitionDuration,\r\n\t\t\tfirstTransitionDuration: 1,\r\n\t\t\ttimer: false,\r\n\t\t\twalk: function (index, slideSettings) { $(\"#cycle\").cycle(\"next\"); }\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// KENBURNS SLIDER BACKGROUND FUNCTION\r\n\tfunction kenburnsBackground() {\r\n\r\n\t\t// INIT VEGAS SLIDESHOW PLUGIN\r\n\t\t$(\".bg-image\").vegas({\r\n\r\n\t\t\tslides: option_hero_background_kenburns_path,\r\n\t\t\ttransition: option_hero_background_kenburns_transition,\r\n\t\t\tdelay: option_hero_background_kenburns_delay,\r\n\t\t\ttransitionDuration: option_hero_background_kenburns_transitionDuration,\r\n\t\t\tfirstTransitionDuration: 1,\r\n\t\t\ttimer: false,\r\n\t\t\tanimation: \"kenburns\",\r\n\t\t\twalk: function (index, slideSettings) { $(\"#cycle\").cycle(\"next\"); }\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// YOUTUBE BACKGROUND FUNCTION\r\n\tfunction youtubeBackground() {\r\n\r\n\t\t// CONVERT OPTION MUTE\r\n\t\tif (option_hero_background_youtube_controls === \"on\") {\r\n\t\t\t$(\".hero .front-content\").append('<div class=\"controls\"><i class=\"volume-button fa fa-volume-up\"></i><i class=\"pause-button ti-control-pause\"></i></div>');\r\n\t\t}\r\n\r\n\t\t// CONVERT OPTION\r\n\t\tif (option_hero_background_youtube_mute === \"on\") {\r\n\r\n\t\t\toption_hero_background_youtube_mute = true;\r\n\t\t\t$(\".volume-button\").removeClass(\"fa-volume-up\").addClass(\"fa-volume-off\");\r\n\r\n\t\t}\r\n\r\n\t\t// CONVERT OPTION MUTE\r\n\t\tif (option_hero_background_youtube_mute === \"off\") {\r\n\t\t\toption_hero_background_youtube_mute = false;\r\n\t\t}\r\n\r\n\t\t// CONVERT OPTION LOOP\r\n\t\tif (option_hero_background_youtube_loop === \"off\") {\r\n\t\t\toption_hero_background_youtube_loop = false;\r\n\t\t} else {\r\n\t\t\toption_hero_background_youtube_loop = true;\r\n\t\t}\r\n\r\n\t\t// INIT YOUTUBE BACKGROUND VIDEO PLUGIN\r\n\t\t$(\".hero .bg-video\").append('<div id=\"bg-youtube\" class=\"player showOn-video-bg\"></div>');\r\n\t\t$(\".hero #bg-youtube\").attr('data-property', '{videoURL:option_hero_background_youtube_url,containment:\".bg-video\",autoPlay:true,mute:option_hero_background_youtube_mute,startAt: option_hero_background_youtube_startPoint,stopAt: option_hero_background_youtube_endPoint,loop: option_hero_background_youtube_loop,opacity:1,stopMovieOnBlur:false,showControls:false}');\r\n\r\n\t\t// INIT YOUTUBE BACKGROUND VIDEO PLUGIN\r\n\t\t$(\".player\").mb_YTPlayer();\r\n\r\n\t\t// SHOW PLAYER CONTROLS\r\n\t\t$(\".hero .controls\").addClass(\"show\");\r\n\r\n\t\t// PLAYER SOUND CONTROLLER\r\n\t\t$(\".volume-button\").click(function () {\r\n\r\n\t\t\tif ($(\"#bg-youtube\").hasClass(\"isMuted\")) {\r\n\r\n\t\t\t\t$(\"#bg-youtube\").YTPUnmute();\r\n\t\t\t\t$(\".volume-button\").removeClass(\"fa-volume-off\").addClass(\"fa-volume-up\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t$(\"#bg-youtube\").YTPMute();\r\n\t\t\t\t$(\".volume-button\").removeClass(\"fa-volume-up\").addClass(\"fa-volume-off\");\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tvar stBtnCheck = true;\r\n\r\n\t\t// DO SOMETHING WHEN PLAYER IS PAUSED\r\n\t\t$(\"#bg-youtube\").on(\"YTPPause\", function () {\r\n\t\t\tstBtnCheck = false;\r\n\t\t});\r\n\r\n\t\t// DO SOMETHING WHEN PLAYER IS PLAYING\r\n\t\t$(\"#bg-youtube\").on(\"YTPPlay\", function () {\r\n\t\t\tstBtnCheck = true;\r\n\t\t});\r\n\r\n\t\t// PAUSE PLAYER ON CLICK\r\n\t\t$(\".pause-button\").click(function () {\r\n\r\n\t\t\tif (stBtnCheck == true) {\r\n\r\n\t\t\t\t$(\"#bg-youtube\").YTPPause();\r\n\t\t\t\t$(\".pause-button\").removeClass(\"ti-control-pause\").addClass(\"ti-control-play\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t$(\"#bg-youtube\").YTPPlay();\r\n\t\t\t\t$(\".pause-button\").removeClass(\"ti-control-play\").addClass(\"ti-control-pause\");\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// SOLID COLOR BACKGROUND FUNCTION\r\n\tfunction colorBackground() {\r\n\r\n\t\t// UPDATE COLOR\r\n\t\t$(\".hero .level-2\").css(\"background\", option_hero_background_color_custom_color);\r\n\t\t$(\".hero .level-2\").children().remove();\r\n\t\t$(\".hero .bg-color\").css(\"opacity\", \"1\");\r\n\r\n\t\t// REMOVE PATTERN AND OVERLAY\r\n\t\t$(\".hero .bg-pattern\").remove();\r\n\t\t$(\".hero .bg-overlay\").remove();\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// GRADIENT BACKGROUND FUNCTION\r\n\tfunction gradientBackground() {\r\n\r\n\t\t// COLOR ARRAY\r\n\t\tvar colors = option_hero_background_gradient_colorArray;\r\n\r\n\t\tvar step = 0;\r\n\r\n\t\tvar selector = $(\".bg-color\");\r\n\r\n\t\t//COLOR TABLE: \r\n\t\tvar colorIndices = [0, 1, 2, 3];\r\n\r\n\t\t//TRANSITION SPEED\r\n\t\tvar gradientSpeed = option_hero_background_gradient_stransitionSpeed / 10000;\r\n\r\n\t\tfunction updateGradient() {\r\n\r\n\t\t\tvar c0_0 = colors[colorIndices[0]];\r\n\t\t\tvar c0_1 = colors[colorIndices[1]];\r\n\t\t\tvar c1_0 = colors[colorIndices[2]];\r\n\t\t\tvar c1_1 = colors[colorIndices[3]];\r\n\r\n\t\t\tvar istep = 1 - step;\r\n\t\t\tvar r1 = Math.round(istep * c0_0[0] + step * c0_1[0]);\r\n\t\t\tvar g1 = Math.round(istep * c0_0[1] + step * c0_1[1]);\r\n\t\t\tvar b1 = Math.round(istep * c0_0[2] + step * c0_1[2]);\r\n\t\t\tvar color1 = \"rgb(\" + r1 + \",\" + g1 + \",\" + b1 + \")\";\r\n\r\n\t\t\tvar r2 = Math.round(istep * c1_0[0] + step * c1_1[0]);\r\n\t\t\tvar g2 = Math.round(istep * c1_0[1] + step * c1_1[1]);\r\n\t\t\tvar b2 = Math.round(istep * c1_0[2] + step * c1_1[2]);\r\n\t\t\tvar color2 = \"rgb(\" + r2 + \",\" + g2 + \",\" + b2 + \")\";\r\n\r\n\t\t\tselector.css({\r\n\t\t\t\tbackground: \"-webkit-gradient(linear, left top, right top, from(\" + color1 + \"), to(\" + color2 + \"))\"\r\n\t\t\t}).css({\r\n\t\t\t\tbackground: \"-moz-linear-gradient(left, \" + color1 + \" 0%, \" + color2 + \" 100%)\"\r\n\t\t\t});\r\n\r\n\t\t\tstep += gradientSpeed;\r\n\r\n\t\t\tif (step >= 1) {\r\n\r\n\t\t\t\tstep %= 1;\r\n\t\t\t\tcolorIndices[0] = colorIndices[1];\r\n\t\t\t\tcolorIndices[2] = colorIndices[3];\r\n\r\n\t\t\t\tcolorIndices[1] = (colorIndices[1] + Math.floor(1 + Math.random() * (colors.length - 1))) % colors.length;\r\n\t\t\t\tcolorIndices[3] = (colorIndices[3] + Math.floor(1 + Math.random() * (colors.length - 1))) % colors.length;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tsetInterval(updateGradient, 1);\r\n\r\n\t\t// SHOW BG COLOR ELEMENT\r\n\t\t$(\".hero .bg-color\").css(\"opacity\", \"1\");\r\n\r\n\t\t// REMOVE PATTERN AND OVERLAY\r\n\t\t$(\".hero .bg-pattern\").remove();\r\n\t\t$(\".hero .bg-overlay\").remove();\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// CANVAS SPHERE BACKGROUND FUNCTION\r\n\tfunction canvasSphereBackground() {\r\n\r\n\t\t// Z-INDEX CORRECTION BACKGROUND OVERLAY \r\n\t\t$(\".hero .background-content .bg-overlay\").css(\"z-index\", \"2\");\r\n\r\n\t\t// THREE.JS BASED\r\n\t\tvar SCREEN_WIDTH = $(\".hero .level-1\").width(),\r\n\t\t\tSCREEN_HEIGHT = $(\".hero .level-1\").height(),\r\n\r\n\t\t\tmouseX = 0, mouseY = 0,\r\n\r\n\t\t\twindowHalfX = window.innerWidth / 2,\r\n\t\t\twindowHalfY = window.innerHeight / 2,\r\n\r\n\t\t\tcamera, scene, renderer;\r\n\r\n\t\tinit();\r\n\t\tanimate();\r\n\r\n\t\tfunction init() {\r\n\r\n\t\t\tvar container, separation = 100, amountX = 50, amountY = 50,\r\n\t\t\t\tparticles, particle;\r\n\r\n\t\t\tcontainer = document.createElement(\"div\");\r\n\t\t\tdocument.getElementById(\"canvas\").appendChild(container);\r\n\r\n\t\t\tcamera = new THREE.PerspectiveCamera(75, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 10000);\r\n\t\t\tcamera.position.z = option_hero_background_sphere_distance;\r\n\r\n\t\t\tscene = new THREE.Scene();\r\n\r\n\t\t\trenderer = new THREE.CanvasRenderer();\r\n\t\t\trenderer.setPixelRatio(window.devicePixelRatio);\r\n\t\t\trenderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);\r\n\t\t\tcontainer.appendChild(renderer.domElement);\r\n\t\t\trenderer.setClearColor(option_hero_background_sphere_background_color);\r\n\r\n\t\t\tvar PI2 = Math.PI * 2;\r\n\t\t\tvar material = new THREE.SpriteCanvasMaterial({\r\n\r\n\t\t\t\tcolor: option_hero_background_sphere_dot_color,\r\n\t\t\t\tprogram: function (context) {\r\n\r\n\t\t\t\t\tcontext.beginPath();\r\n\t\t\t\t\tcontext.arc(0, 0, 0.5, 0, PI2, true);\r\n\t\t\t\t\tcontext.fill();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < 1000; i++) {\r\n\r\n\t\t\t\tparticle = new THREE.Sprite(material);\r\n\t\t\t\tparticle.position.x = Math.random() * 2 - 1;\r\n\t\t\t\tparticle.position.y = Math.random() * 2 - 1;\r\n\t\t\t\tparticle.position.z = Math.random() * 2 - 1;\r\n\t\t\t\tparticle.position.normalize();\r\n\t\t\t\tparticle.position.multiplyScalar(Math.random() * 10 + 450);\r\n\t\t\t\tparticle.scale.multiplyScalar(2);\r\n\t\t\t\tscene.add(particle);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < 300; i++) {\r\n\r\n\t\t\t\tvar geometry = new THREE.Geometry();\r\n\r\n\t\t\t\tvar vertex = new THREE.Vector3(Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1);\r\n\t\t\t\tvertex.normalize();\r\n\t\t\t\tvertex.multiplyScalar(450);\r\n\r\n\t\t\t\tgeometry.vertices.push(vertex);\r\n\r\n\t\t\t\tvar vertex2 = vertex.clone();\r\n\t\t\t\tvertex2.multiplyScalar(Math.random() * 0.3 + 1);\r\n\r\n\t\t\t\tgeometry.vertices.push(vertex2);\r\n\r\n\t\t\t\tvar line = new THREE.Line(geometry, new THREE.LineBasicMaterial({ color: option_hero_background_sphere_line_color, opacity: Math.random() }));\r\n\t\t\t\tscene.add(line);\r\n\t\t\t}\r\n\r\n\t\t\tdocument.addEventListener(\"mousemove\", onDocumentMouseMove, false);\r\n\t\t\tdocument.addEventListener(\"touchstart\", onDocumentTouchStart, false);\r\n\t\t\tdocument.addEventListener(\"touchmove\", onDocumentTouchMove, false);\r\n\r\n\t\t\twindow.addEventListener(\"resize\", onWindowResize, false);\r\n\r\n\t\t}\r\n\r\n\t\tfunction onWindowResize() {\r\n\r\n\t\t\tvar SCREEN_WIDTH = $(\".hero .level-1\").width(),\r\n\t\t\t\tSCREEN_HEIGHT = $(\".hero .level-1\").height();\r\n\r\n\t\t\twindowHalfX = SCREEN_WIDTH / 2;\r\n\t\t\twindowHalfY = SCREEN_HEIGHT / 2;\r\n\r\n\t\t\tcamera.aspect = SCREEN_WIDTH / SCREEN_HEIGHT;\r\n\t\t\tcamera.updateProjectionMatrix();\r\n\r\n\t\t\trenderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);\r\n\r\n\t\t}\r\n\r\n\t\tfunction onDocumentMouseMove(event) {\r\n\r\n\t\t\tmouseX = event.clientX - windowHalfX;\r\n\t\t\tmouseY = event.clientY - windowHalfY;\r\n\t\t}\r\n\r\n\t\tfunction onDocumentTouchStart(event) {\r\n\r\n\t\t\tif (event.touches.length > 1) {\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tmouseX = event.touches[0].pageX - windowHalfX;\r\n\t\t\t\tmouseY = event.touches[0].pageY - windowHalfY;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction onDocumentTouchMove(event) {\r\n\r\n\t\t\tif (event.touches.length === 1) {\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tmouseX = event.touches[0].pageX - windowHalfX;\r\n\t\t\t\tmouseY = event.touches[0].pageY - windowHalfY;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction animate() {\r\n\r\n\t\t\trequestAnimationFrame(animate);\r\n\r\n\t\t\trender();\r\n\r\n\t\t}\r\n\r\n\t\tfunction render() {\r\n\r\n\t\t\tif (lem) {\r\n\r\n\t\t\t\tcamera.position.x += (mouseX - camera.position.x) * 0.05;\r\n\t\t\t\tcamera.position.y += (- mouseY + 200 - camera.position.y) * 0.05;\r\n\t\t\t\tcamera.lookAt(scene.position);\r\n\r\n\t\t\t\tscene.rotation.y += option_hero_background_sphere_rotation_speed / 100;\r\n\r\n\t\t\t\trenderer.render(scene, camera);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar lem = true;\r\n\r\n\t\t$(document).scroll(function () {\r\n\r\n\t\t\tif ($(this).scrollTop() > $(window).height()) {\r\n\t\t\t\tlem = false;\r\n\t\t\t} else {\r\n\t\t\t\tlem = true;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// CANVAS WAVES BACKGROUND FUNCTION\r\n\tfunction canvasWavesBackground() {\r\n\r\n\t\t// Z-INDEX CORRECTION BACKGROUND OVERLAY \r\n\t\t$(\".hero .background-content .bg-overlay\").css(\"z-index\", \"2\");\r\n\r\n\t\t// THREE.JS BASED\r\n\t\tvar SEPARATION = option_hero_background_waves_dotSpacing, AMOUNTX = option_hero_background_waves_dotAmountX, AMOUNTY = option_hero_background_waves_dotAmountY;\r\n\r\n\t\tvar SCREEN_WIDTH = $(\".hero .level-1\").width(),\r\n\t\t\tSCREEN_HEIGHT = $(\".hero .level-1\").height();\r\n\r\n\t\tvar container;\r\n\t\tvar camera, scene, renderer;\r\n\r\n\t\tvar particles, particle, count = 0;\r\n\r\n\t\tvar mouseX = 0, mouseY = 0;\r\n\r\n\t\tvar windowHalfX = SCREEN_WIDTH / 2;\r\n\t\tvar windowHalfY = SCREEN_HEIGHT / 2;\r\n\r\n\t\tinit();\r\n\t\tanimate();\r\n\r\n\t\tfunction init() {\r\n\r\n\t\t\tcontainer = document.createElement(\"div\");\r\n\t\t\tdocument.getElementById(\"canvas\").appendChild(container);\r\n\r\n\t\t\tcamera = new THREE.PerspectiveCamera(75, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 10000);\r\n\t\t\tcamera.position.z = option_hero_background_waves_distance;\r\n\r\n\t\t\tscene = new THREE.Scene();\r\n\r\n\t\t\tparticles = new Array();\r\n\r\n\t\t\tvar PI2 = Math.PI * 2;\r\n\t\t\tvar material = new THREE.SpriteCanvasMaterial({\r\n\r\n\t\t\t\tcolor: option_hero_background_waves_dot_color,\r\n\t\t\t\tprogram: function (context) {\r\n\r\n\t\t\t\t\tcontext.beginPath();\r\n\t\t\t\t\tcontext.arc(0, 0, 0.5, 0, PI2, true);\r\n\t\t\t\t\tcontext.fill();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\tvar i = 0;\r\n\r\n\t\t\tfor (var ix = 0; ix < AMOUNTX; ix++) {\r\n\r\n\t\t\t\tfor (var iy = 0; iy < AMOUNTY; iy++) {\r\n\r\n\t\t\t\t\tparticle = particles[i++] = new THREE.Sprite(material);\r\n\t\t\t\t\tparticle.position.x = ix * SEPARATION - ((AMOUNTX * SEPARATION) / 2);\r\n\t\t\t\t\tparticle.position.z = iy * SEPARATION - ((AMOUNTY * SEPARATION) / 2);\r\n\t\t\t\t\tscene.add(particle);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\trenderer = new THREE.CanvasRenderer();\r\n\t\t\trenderer.setPixelRatio(window.devicePixelRatio);\r\n\t\t\trenderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);\r\n\t\t\tcontainer.appendChild(renderer.domElement);\r\n\t\t\trenderer.setClearColor(option_hero_background_waves_background_color);\r\n\r\n\t\t\tdocument.addEventListener(\"mousemove\", onDocumentMouseMove, false);\r\n\t\t\tdocument.addEventListener(\"touchstart\", onDocumentTouchStart, false);\r\n\t\t\tdocument.addEventListener(\"touchmove\", onDocumentTouchMove, false);\r\n\r\n\t\t\twindow.addEventListener(\"resize\", onWindowResize, false);\r\n\r\n\t\t}\r\n\r\n\t\tfunction onWindowResize() {\r\n\r\n\t\t\tvar SCREEN_WIDTH = $(\".hero .level-1\").width(),\r\n\t\t\t\tSCREEN_HEIGHT = $(\".hero .level-1\").height();\r\n\r\n\t\t\twindowHalfX = SCREEN_WIDTH / 2;\r\n\t\t\twindowHalfY = SCREEN_HEIGHT / 2;\r\n\r\n\t\t\tcamera.aspect = SCREEN_WIDTH / SCREEN_HEIGHT;\r\n\t\t\tcamera.updateProjectionMatrix();\r\n\r\n\t\t\trenderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);\r\n\r\n\t\t}\r\n\r\n\t\tfunction onDocumentMouseMove(event) {\r\n\r\n\t\t\tmouseX = event.clientX - windowHalfX;\r\n\t\t\tmouseY = event.clientY - windowHalfY;\r\n\r\n\t\t}\r\n\r\n\t\tfunction onDocumentTouchStart(event) {\r\n\r\n\t\t\tif (event.touches.length > 1) {\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tmouseX = event.touches[0].pageX - windowHalfX;\r\n\t\t\t\tmouseY = event.touches[0].pageY - windowHalfY;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction onDocumentTouchMove(event) {\r\n\r\n\t\t\tif (event.touches.length === 1) {\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tmouseX = event.touches[0].pageX - windowHalfX;\r\n\t\t\t\tmouseY = event.touches[0].pageY - windowHalfY;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction animate() {\r\n\r\n\t\t\trequestAnimationFrame(animate);\r\n\r\n\t\t\trender();\r\n\r\n\r\n\t\t}\r\n\r\n\t\tfunction render() {\r\n\r\n\t\t\tif (lem) {\r\n\r\n\t\t\t\tcamera.position.x += (mouseX - camera.position.x) * 0.05;\r\n\t\t\t\tcamera.position.y += (- mouseY - camera.position.y) * 0.05;\r\n\t\t\t\tcamera.lookAt(scene.position);\r\n\r\n\t\t\t\tvar i = 0;\r\n\r\n\t\t\t\tfor (var ix = 0; ix < AMOUNTX; ix++) {\r\n\r\n\t\t\t\t\tfor (var iy = 0; iy < AMOUNTY; iy++) {\r\n\r\n\t\t\t\t\t\tparticle = particles[i++];\r\n\t\t\t\t\t\tparticle.position.y = (Math.sin((ix + count) * 0.3) * 50) +\r\n\t\t\t\t\t\t\t(Math.sin((iy + count) * 0.5) * 50);\r\n\t\t\t\t\t\tparticle.scale.x = particle.scale.y = (Math.sin((ix + count) * 0.3) + 1) * 4 +\r\n\t\t\t\t\t\t\t(Math.sin((iy + count) * 0.5) + 1) * 4;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\trenderer.render(scene, camera);\r\n\r\n\t\t\t\tcount += 0.1;\r\n\r\n\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\t\t// PAUSE WHEN NOT IN VIEWPORT\r\n\t\tvar lem = true;\r\n\r\n\t\t$(document).scroll(function () {\r\n\r\n\t\t\tif ($(this).scrollTop() > $(window).height()) {\r\n\t\t\t\tlem = false;\r\n\t\t\t} else {\r\n\t\t\t\tlem = true;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// CANVAS MESH BACKGROUND FUNCTION\r\n\tfunction meshBackground() {\r\n\r\n\t\tvar c,\r\n\t\t\tctx,\r\n\t\t\tw,\r\n\t\t\th,\r\n\t\t\tspacing,\r\n\t\t\tspread,\r\n\t\t\tbasePoint,\r\n\t\t\trightPoint,\r\n\t\t\tbotPoint,\r\n\t\t\tmouse,\r\n\t\t\tmouseMoved,\r\n\t\t\tcols,\r\n\t\t\trows,\r\n\t\t\tpoints,\r\n\t\t\ttick;\r\n\r\n\t\tfunction Point(opt) {\r\n\r\n\t\t\tthis.x = opt.x;\r\n\t\t\tthis.y = opt.y;\r\n\t\t\tthis.xBase = this.x;\r\n\t\t\tthis.yBase = this.y;\r\n\t\t\tthis.offset = rand(0, 1000);\r\n\t\t\tthis.duration = rand(20, 60);\r\n\t\t\tthis.range = rand(5, 5);\r\n\t\t\tthis.dir = rand(0, 1) > 0.5 ? 1 : -1;\r\n\t\t\tthis.rad = rand(2, 4);\r\n\r\n\t\t}\r\n\r\n\t\tPoint.prototype.step = function () {\r\n\r\n\t\t\tthis.x = this.xBase + this.dir * Math.sin((tick + this.offset) / this.duration) * this.range;\r\n\t\t\tthis.y = this.yBase + this.dir * Math.cos((tick + this.offset) / this.duration) * this.range;\r\n\r\n\t\t\tvar angle = angleTo(this, mouse);\r\n\r\n\t\t\tthis.x = this.x + Math.cos(angle) * 100;\r\n\t\t\tthis.y = this.y + Math.sin(angle) * 100;\r\n\r\n\t\t};\r\n\r\n\t\tfunction rand(min, max) {\r\n\t\t\treturn Math.random() * (max - min) + min;\r\n\t\t}\r\n\r\n\t\tfunction dist(p1, p2) {\r\n\r\n\t\t\tvar dx = p1.x - p2.x,\r\n\t\t\t\tdy = p1.y - p2.y;\r\n\r\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\r\n\t\t}\r\n\r\n\t\tfunction angleTo(p1, p2) {\r\n\r\n\t\t\tvar dx = p1.x - p2.x,\r\n\t\t\t\tdy = p1.y - p2.y;\r\n\r\n\t\t\treturn Math.atan2(dy, dx);\r\n\r\n\t\t}\r\n\r\n\t\tfunction init() {\r\n\r\n\t\t\tc = document.createElement('canvas');\r\n\t\t\tctx = c.getContext('2d');\r\n\t\t\tmouse = { x: 0, y: 0 };\r\n\t\t\tpoints = [];\r\n\t\t\tspacing = 180;\r\n\t\t\tspread = spacing * 0.25;\r\n\t\t\tdocument.getElementById(\"canvas\").appendChild(c);\r\n\t\t\treset();\r\n\t\t\tloop();\r\n\r\n\t\t}\r\n\r\n\t\tfunction reset() {\r\n\r\n\t\t\tw = $(\".hero .level-1\").width();\r\n\t\t\th = $(\".hero .level-1\").height();\r\n\t\t\tc.width = w;\r\n\t\t\tc.height = h;\r\n\t\t\tmouse.x = w / 2;\r\n\t\t\tmouse.y = h / 2;\r\n\t\t\tmouseMoved = false;\r\n\t\t\tcols = 0;\r\n\t\t\trows = 0;\r\n\t\t\tpoints.length = 0;\r\n\t\t\ttick = 0;\r\n\t\t\tcreate();\r\n\r\n\t\t\tctx.strokeStyle = option_hero_background_mesh_color;\r\n\t\t\tctx.lineWidth = 2;\r\n\r\n\t\t}\r\n\r\n\t\tfunction create() {\r\n\r\n\t\t\tfor (var x = -spacing / 2; x < w + spacing; x += spacing) {\r\n\r\n\t\t\t\tcols++;\r\n\r\n\t\t\t\tfor (var y = -spacing / 2; y < h + spacing; y += spacing) {\r\n\r\n\t\t\t\t\tif (x == -spacing / 2) {\r\n\t\t\t\t\t\trows++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpoints.push(new Point({\r\n\r\n\t\t\t\t\t\tx: ~~(x + rand(-spread, spread)),\r\n\t\t\t\t\t\ty: ~~(y + rand(-spread, spread))\r\n\r\n\t\t\t\t\t}));\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction step() {\r\n\r\n\t\t\tif (!mouseMoved) {\r\n\r\n\t\t\t\tmouse.x = w / 2 + Math.cos(tick / 40) * 90;\r\n\t\t\t\tmouse.y = h / 2 + Math.sin(tick / 40) * 90;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tpoints.forEach(function (point) {\r\n\t\t\t\tpoint.step();\r\n\t\t\t});\r\n\r\n\t\t\ttick++;\r\n\r\n\t\t}\r\n\r\n\t\tfunction draw() {\r\n\r\n\t\t\tctx.clearRect(0, 0, w, h);\r\n\t\t\tctx.beginPath();\r\n\r\n\t\t\tfor (var x = 0; x < cols; x++) {\r\n\r\n\t\t\t\tfor (var y = 0; y < rows; y++) {\r\n\r\n\t\t\t\t\tbasePoint = points[x * rows + y];\r\n\t\t\t\t\trightPoint = x === cols - 1 ? null : points[(x + 1) * rows + y];\r\n\t\t\t\t\tbotPoint = y === rows - 1 ? null : points[x * rows + y + 1];\r\n\r\n\t\t\t\t\tif (rightPoint) {\r\n\r\n\t\t\t\t\t\tctx.moveTo(basePoint.x, basePoint.y);\r\n\t\t\t\t\t\tctx.lineTo(rightPoint.x, rightPoint.y);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (botPoint) {\r\n\r\n\t\t\t\t\t\tctx.moveTo(basePoint.x, basePoint.y);\r\n\t\t\t\t\t\tctx.lineTo(botPoint.x, botPoint.y);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tctx.stroke();\r\n\r\n\t\t\tctx.fillStyle = '#000';\r\n\t\t\tpoints.forEach(function (point) {\r\n\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.translate(point.x, point.y);\r\n\t\t\t\tctx.rotate(Math.PI / 4);\r\n\t\t\t\tctx.rect(0, 0, 0, 0);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\tctx.restore();\r\n\r\n\t\t\t});\r\n\r\n\t\t\tvar grad = ctx.createRadialGradient(mouse.x, mouse.y, 0, mouse.x, mouse.y, option_hero_background_mesh_spotlight_size);\r\n\r\n\t\t\tgrad.addColorStop(0, 'hsla(0, 0%, 0%, 0)');\r\n\t\t\tgrad.addColorStop(1, 'hsla(0, 0%, 0%, 0.93)');\r\n\r\n\t\t\tctx.fillStyle = grad;\r\n\t\t\tctx.fillRect(0, 0, w, h);\r\n\r\n\t\t}\r\n\r\n\t\tfunction loop() {\r\n\r\n\t\t\trequestAnimationFrame(loop);\r\n\t\t\tstep();\r\n\t\t\tdraw();\r\n\r\n\t\t}\r\n\r\n\t\tfunction mousemove(e) {\r\n\r\n\t\t\tmouseMoved = true;\r\n\t\t\tmouse.x = e.pageX;\r\n\t\t\tmouse.y = e.pageY;\r\n\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('resize', reset);\r\n\t\twindow.addEventListener('mousemove', mousemove);\r\n\r\n\t\tinit();\r\n\r\n\t\t$(\".hero .background-content #canvas canvas\").css(\"background-color\", option_hero_background_mesh_background_color);\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// CANVAS SPACE BACKGROUND FUNCTION\r\n\tfunction spaceBackground() {\r\n\r\n\t\t/**\r\n\t\t * A jQuery plugin that generates an interactive starfield inside a canvas element.\r\n\t\t *\r\n\t\t * Based on Chiptune's starfield.js:\r\n\t\t * https://github.com/chiptune/js/blob/master/starfield.html\r\n\t\t */\r\n\r\n\t\t(function ($, window, document, undefined) {\r\n\r\n\t\t\t// Plugin constructor\r\n\t\t\tvar Starfield = function (el, options) {\r\n\r\n\t\t\t\tthis.el = el;\r\n\t\t\t\tthis.$el = $(el);\r\n\t\t\t\tthis.options = options;\r\n\r\n\t\t\t\tthat = this;\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar isPlaying;\r\n\t\t\tvar isInited = false;\r\n\t\t\tvar canCanvas = false;\r\n\t\t\tvar animId;\r\n\t\t\tvar that;\r\n\r\n\t\t\t// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n\t\t\t// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\r\n\r\n\t\t\t// requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel\r\n\r\n\t\t\t// MIT license\r\n\r\n\t\t\t(function () {\r\n\r\n\t\t\t\tvar lastTime = 0;\r\n\t\t\t\tvar vendors = ['ms', 'moz', 'webkit', 'o'];\r\n\t\t\t\tfor (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n\t\t\t\t\twindow.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n\t\t\t\t\twindow.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\r\n\t\t\t\t\t\twindow[vendors[x] + 'CancelRequestAnimationFrame'];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!window.requestAnimationFrame)\r\n\t\t\t\t\twindow.requestAnimationFrame = function (callback, element) {\r\n\t\t\t\t\t\tvar currTime = new Date().getTime();\r\n\t\t\t\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n\t\t\t\t\t\tvar id = window.setTimeout(function () {\r\n\t\t\t\t\t\t\tcallback(currTime + timeToCall);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttimeToCall);\r\n\t\t\t\t\t\tlastTime = currTime + timeToCall;\r\n\t\t\t\t\t\treturn id;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\tif (!window.cancelAnimationFrame)\r\n\t\t\t\t\twindow.cancelAnimationFrame = function (id) {\r\n\t\t\t\t\t\tclearTimeout(id);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t}());\r\n\r\n\t\t\tStarfield.prototype = {\r\n\r\n\t\t\t\tdefaults: {\r\n\t\t\t\t\tstarColor: option_hero_background_star_star_color,\r\n\t\t\t\t\tbgColor: option_hero_background_star_background_color,\r\n\t\t\t\t\tmouseMove: true,\r\n\t\t\t\t\tmouseColor: \"rgba(0,0,0,0.2)\",\r\n\t\t\t\t\tmouseSpeed: 15,\r\n\t\t\t\t\tspeed: option_hero_background_space_star_speed,\r\n\t\t\t\t\tquantity: option_hero_background_space_star_amount,\r\n\t\t\t\t\tratio: option_hero_background_space_star_amount / 2,\r\n\t\t\t\t\tdivclass: \"starfield\"\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tresizer: function () {\r\n\r\n\t\t\t\t\tvar oldStar = this.star;\r\n\t\t\t\t\tvar initW = this.context.canvas.width;\r\n\t\t\t\t\tvar initH = this.context.canvas.height;\r\n\r\n\t\t\t\t\tthis.w = this.$el.width();\r\n\t\t\t\t\tthis.h = this.$el.height();\r\n\t\t\t\t\tthis.x = Math.round(this.w / 2);\r\n\t\t\t\t\tthis.y = Math.round(this.h / 2);\r\n\r\n\t\t\t\t\tvar ratX = this.w / initW;\r\n\t\t\t\t\tvar ratY = this.h / initH;\r\n\r\n\t\t\t\t\tthis.context.canvas.width = this.w;\r\n\t\t\t\t\tthis.context.canvas.height = this.h;\r\n\r\n\t\t\t\t\tfor (var i = 0; i < this.n; i++) {\r\n\r\n\t\t\t\t\t\tthis.star[i][0] = oldStar[i][0] * ratX;\r\n\t\t\t\t\t\tthis.star[i][1] = oldStar[i][1] * ratY;\r\n\r\n\t\t\t\t\t\tthis.star[i][3] = this.x + (this.star[i][0] / this.star[i][2]) * this.star_ratio;\r\n\t\t\t\t\t\tthis.star[i][4] = this.y + (this.star[i][1] / this.star[i][2]) * this.star_ratio;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthat.context.fillStyle = that.settings.bgColor;\r\n\t\t\t\t\tthis.context.strokeStyle = this.settings.starColor;\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tinit: function () {\r\n\r\n\t\t\t\t\tthis.settings = $.extend({}, this.defaults, this.options);\r\n\r\n\t\t\t\t\tvar url = document.location.href;\r\n\t\t\t\t\tthis.n = parseInt(\r\n\r\n\t\t\t\t\t\t(url.indexOf('n=') != -1) ? url.substring(url.indexOf('n=') + 2, (\r\n\t\t\t\t\t\t\t(url.substring(\r\n\t\t\t\t\t\t\t\turl.indexOf('n=') + 2,\r\n\t\t\t\t\t\t\t\turl.length)).indexOf('&') != -1) ? url.indexOf('n=') + 2 + (url.substring(\r\n\t\t\t\t\t\t\t\t\turl.indexOf('n=') + 2,\r\n\t\t\t\t\t\t\t\t\turl.length)).indexOf('&') :\r\n\t\t\t\t\t\t\turl.length) :\r\n\t\t\t\t\t\t\tthis.settings.quantity\r\n\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tthis.flag = true;\r\n\t\t\t\t\tthis.test = true;\r\n\t\t\t\t\tthis.w = 0;\r\n\t\t\t\t\tthis.h = 0;\r\n\t\t\t\t\tthis.x = 0;\r\n\t\t\t\t\tthis.y = 0;\r\n\t\t\t\t\tthis.z = 0;\r\n\t\t\t\t\tthis.star_color_ratio = 0;\r\n\t\t\t\t\tthis.star_x_save = 0;\r\n\t\t\t\t\tthis.star_y_save = 0;\r\n\t\t\t\t\tthis.star_ratio = this.settings.ratio;\r\n\t\t\t\t\tthis.star_speed = this.settings.speed;\r\n\t\t\t\t\tthis.star_speed_save = 0;\r\n\t\t\t\t\tthis.star = new Array(this.n);\r\n\t\t\t\t\tthis.color = this.settings.starColor;\r\n\t\t\t\t\tthis.opacity = 0.1;\r\n\r\n\t\t\t\t\tthis.cursor_x = 0;\r\n\t\t\t\t\tthis.cursor_y = 0;\r\n\t\t\t\t\tthis.mouse_x = 0;\r\n\t\t\t\t\tthis.mouse_y = 0;\r\n\r\n\t\t\t\t\tthis.canvas_x = 0;\r\n\t\t\t\t\tthis.canvas_y = 0;\r\n\t\t\t\t\tthis.canvas_w = 0;\r\n\t\t\t\t\tthis.canvas_h = 0;\r\n\r\n\t\t\t\t\tthis.fps = this.settings.fps;\r\n\r\n\t\t\t\t\tthis.desktop = !navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|IEMobile)/);\r\n\t\t\t\t\tthis.orientationSupport = window.DeviceOrientationEvent !== undefined;\r\n\t\t\t\t\tthis.portrait = null;\r\n\r\n\t\t\t\t\tvar canvasInit = function () {\r\n\t\t\t\t\t\tthat.w = that.$el.width();\r\n\t\t\t\t\t\tthat.h = that.$el.height();\r\n\r\n\t\t\t\t\t\tthat.initW = that.w;\r\n\t\t\t\t\t\tthat.initH = that.h;\r\n\r\n\t\t\t\t\t\tthat.portrait = that.w < that.h;\r\n\r\n\t\t\t\t\t\tthat.wrapper = $('<canvas />')\r\n\t\t\t\t\t\t\t.addClass(that.settings.divclass);\r\n\r\n\t\t\t\t\t\tthat.wrapper.appendTo(that.el);\r\n\r\n\t\t\t\t\t\tthat.starz = $('canvas', that.el);\r\n\r\n\t\t\t\t\t\tif (that.starz[0].getContext) {\r\n\t\t\t\t\t\t\tthat.context = that.starz[0].getContext('2d');\r\n\t\t\t\t\t\t\tcanCanvas = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthat.context.canvas.width = that.w;\r\n\t\t\t\t\t\tthat.context.canvas.height = that.h;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcanvasInit();\r\n\r\n\t\t\t\t\tvar starInit = function () {\r\n\r\n\t\t\t\t\t\tif (canCanvas) {\r\n\r\n\t\t\t\t\t\t\tthat.x = Math.round(that.w / 2);\r\n\t\t\t\t\t\t\tthat.y = Math.round(that.h / 2);\r\n\t\t\t\t\t\t\tthat.z = (that.w + that.h) / 2;\r\n\t\t\t\t\t\t\tthat.star_color_ratio = 1 / that.z;\r\n\t\t\t\t\t\t\tthat.cursor_x = that.x;\r\n\t\t\t\t\t\t\tthat.cursor_y = that.y;\r\n\r\n\t\t\t\t\t\t\tfor (var i = 0; i < that.n; i++) {\r\n\r\n\t\t\t\t\t\t\t\tthat.star[i] = new Array(5);\r\n\r\n\t\t\t\t\t\t\t\tthat.star[i][0] = Math.random() * that.w * 2 - that.x * 2;\r\n\t\t\t\t\t\t\t\tthat.star[i][1] = Math.random() * that.h * 2 - that.y * 2;\r\n\t\t\t\t\t\t\t\tthat.star[i][2] = Math.round(Math.random() * that.z);\r\n\t\t\t\t\t\t\t\tthat.star[i][3] = 0;\r\n\t\t\t\t\t\t\t\tthat.star[i][4] = 0;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthat.context.fillStyle = that.settings.bgColor;\r\n\t\t\t\t\t\t\tthat.context.strokeStyle = that.settings.starColor;\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstarInit();\r\n\r\n\t\t\t\t\tisInited = true;\r\n\t\t\t\t},\r\n\r\n\t\t\t\tanim: function () {\r\n\t\t\t\t\tthis.mouse_x = this.cursor_x - this.x;\r\n\t\t\t\t\tthis.mouse_y = this.cursor_y - this.y;\r\n\t\t\t\t\tthis.context.fillRect(0, 0, this.w, this.h);\r\n\r\n\t\t\t\t\tfor (var i = 0; i < this.n; i++) {\r\n\t\t\t\t\t\tthis.test = true;\r\n\t\t\t\t\t\tthis.star_x_save = this.star[i][3];\r\n\t\t\t\t\t\tthis.star_y_save = this.star[i][4];\r\n\t\t\t\t\t\tthis.star[i][0] += this.mouse_x >> 4;\r\n\r\n\t\t\t\t\t\t// X coords\r\n\t\t\t\t\t\tif (this.star[i][0] > this.x << 1) {\r\n\t\t\t\t\t\t\tthis.star[i][0] -= this.w << 1;\r\n\t\t\t\t\t\t\tthis.test = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.star[i][0] < -this.x << 1) {\r\n\t\t\t\t\t\t\tthis.star[i][0] += this.w << 1;\r\n\t\t\t\t\t\t\tthis.test = false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.star[i][1] += this.mouse_y >> 4;\r\n\t\t\t\t\t\tif (this.star[i][1] > this.y << 1) {\r\n\r\n\t\t\t\t\t\t\tthis.star[i][1] -= this.h << 1;\r\n\t\t\t\t\t\t\tthis.test = false;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.star[i][1] < -this.y << 1) {\r\n\r\n\t\t\t\t\t\t\tthis.star[i][1] += this.h << 1;\r\n\t\t\t\t\t\t\tthis.test = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Z coords\r\n\t\t\t\t\t\tthis.star[i][2] -= this.star_speed;\r\n\t\t\t\t\t\tif (this.star[i][2] > this.z) {\r\n\r\n\t\t\t\t\t\t\tthis.star[i][2] -= this.z;\r\n\t\t\t\t\t\t\tthis.test = false;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.star[i][2] < 0) {\r\n\r\n\t\t\t\t\t\t\tthis.star[i][2] += this.z;\r\n\t\t\t\t\t\t\tthis.test = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.star[i][3] = this.x + (this.star[i][0] / this.star[i][2]) * this.star_ratio;\r\n\t\t\t\t\t\tthis.star[i][4] = this.y + (this.star[i][1] / this.star[i][2]) * this.star_ratio;\r\n\r\n\t\t\t\t\t\tif (this.star_x_save > 0 &&\r\n\t\t\t\t\t\t\tthis.star_x_save < this.w &&\r\n\t\t\t\t\t\t\tthis.star_y_save > 0 &&\r\n\t\t\t\t\t\t\tthis.star_y_save < this.h &&\r\n\t\t\t\t\t\t\tthis.test) {\r\n\t\t\t\t\t\t\tthis.context.lineWidth = (1 - this.star_color_ratio * this.star[i][2]) * 2;\r\n\t\t\t\t\t\t\tthis.context.beginPath();\r\n\t\t\t\t\t\t\tthis.context.moveTo(this.star_x_save, this.star_y_save);\r\n\t\t\t\t\t\t\tthis.context.lineTo(this.star[i][3], this.star[i][4]);\r\n\t\t\t\t\t\t\tthis.context.stroke();\r\n\t\t\t\t\t\t\tthis.context.closePath();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tloop: function () {\r\n\r\n\t\t\t\t\tthis.anim();\r\n\r\n\t\t\t\t\tanimId = window.requestAnimationFrame(function () {\r\n\t\t\t\t\t\tthat.loop()\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tmove: function () {\r\n\r\n\t\t\t\t\tvar doc = document.documentElement;\r\n\r\n\t\t\t\t\tif (this.orientationSupport && !this.desktop) {\r\n\t\t\t\t\t\twindow.addEventListener('deviceorientation', handleOrientation, false);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twindow.addEventListener('mousemove', handleMousemove, false);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction handleOrientation(event) {\r\n\r\n\t\t\t\t\t\tif (event.beta !== null && event.gamma !== null) {\r\n\r\n\t\t\t\t\t\t\tvar x = event.gamma,\r\n\t\t\t\t\t\t\t\ty = event.beta;\r\n\r\n\t\t\t\t\t\t\tif (!that.portrait) {\r\n\t\t\t\t\t\t\t\tx = event.beta * -1;\r\n\t\t\t\t\t\t\t\ty = event.gamma;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthat.cursor_x = (that.w / 2) + (x * 5);\r\n\t\t\t\t\t\t\tthat.cursor_y = (that.h / 2) + (y * 5);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction handleMousemove(event) {\r\n\r\n\t\t\t\t\t\tthat.cursor_x = event.pageX || event.clientX + doc.scrollLeft - doc.clientLeft;\r\n\t\t\t\t\t\tthat.cursor_y = event.pageY || event.clientY + doc.scrollTop - doc.clientTop;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tstop: function () {\r\n\t\t\t\t\twindow.cancelAnimationFrame(animId);\r\n\r\n\t\t\t\t\tisPlaying = false;\r\n\t\t\t\t},\r\n\r\n\t\t\t\tstart: function () {\r\n\r\n\t\t\t\t\tif (!isInited) {\r\n\t\t\t\t\t\tisInited = true;\r\n\t\t\t\t\t\tthis.init();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!isPlaying) {\r\n\t\t\t\t\t\tisPlaying = true;\r\n\t\t\t\t\t\tthis.loop();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twindow.addEventListener('resize', function () {\r\n\t\t\t\t\t\tthat.resizer()\r\n\t\t\t\t\t}, false);\r\n\r\n\t\t\t\t\twindow.addEventListener('orientationchange', function () {\r\n\t\t\t\t\t\tthat.resizer()\r\n\t\t\t\t\t}, false);\r\n\r\n\t\t\t\t\tif (this.settings.mouseMove) {\r\n\t\t\t\t\t\tthis.move();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tStarfield.defaults = Starfield.prototype.defaults;\r\n\r\n\t\t\t// Finally, the actual plugin code\r\n\t\t\t$.fn.starfield = function (options) {\r\n\t\t\t\treturn this.each(function () {\r\n\t\t\t\t\tnew Starfield(this, options).start();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\twindow.Starfield = Starfield;\r\n\t\t})(jQuery, window, document);\r\n\r\n\t\t$('#canvas').starfield();\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// ABSTRACT BACKGROUND FUNCTION\r\n\tfunction abstractBackground() {\r\n\r\n\t\t$(\".hero .bg-pattern\").remove();\r\n\t\t$(\".hero .bg-overlay\").remove();\r\n\r\n\t\tvar bgInterval = setInterval(function () {\r\n\r\n\t\t\tif ($(\".hero .level-1 #canvas\").offset().top <= 0) {\r\n\r\n\t\t\t\t$(\".hero .level-1 #canvas\").css({ WebkitTransition: \"all .4s\", transition: \"all .4s\" });\r\n\t\t\t\t$(\".hero .level-1 #canvas\").css(\"background\", option_hero_background_abstract_bg_color);\r\n\r\n\t\t\t\tclearInterval(bgInterval);\r\n\r\n\t\t\t}\r\n\r\n\t\t}, 50);\r\n\r\n\t\tvar MESH = {\r\n\t\t\twidth: option_hero_background_width / 100,\r\n\t\t\theight: 1.8,\r\n\t\t\tdepth: 60,\r\n\t\t\tsegments: 9,\r\n\t\t\tslices: 8,\r\n\t\t\txRange: option_hero_background_width_expansion,\r\n\t\t\tyRange: 0.1,\r\n\t\t\tzRange: 1.0,\r\n\t\t\tambient: '#666666',\r\n\t\t\tdiffuse: '#fff',\r\n\t\t\tspeed: option_hero_background_move_speed / 10000\r\n\t\t};\r\n\r\n\t\tvar LIGHT = {\r\n\t\t\tcount: 2,\r\n\t\t\txyScalar: 1,\r\n\t\t\tzOffset: 100,\r\n\t\t\tambient: '#fff',\r\n\t\t\tdiffuse: '#b3b3b3',\r\n\t\t\tspeed: 0.0002,\r\n\t\t\tgravity: 500,\r\n\t\t\tdampening: 0.95,\r\n\t\t\tminLimit: 10,\r\n\t\t\tmaxLimit: null,\r\n\t\t\tminDistance: 20,\r\n\t\t\tmaxDistance: 400,\r\n\t\t\tautopilot: true,\r\n\t\t\tdraw: false,\r\n\t\t\tbounds: FSS.Vector3.create(),\r\n\t\t\tstep: FSS.Vector3.create(\r\n\t\t\t\tMath.randomInRange(0.2, 1.0),\r\n\t\t\t\tMath.randomInRange(0.2, 1.0),\r\n\t\t\t\tMath.randomInRange(0.2, 1.0)\r\n\t\t\t)\r\n\t\t};\r\n\r\n\t\tvar RENDER = {\r\n\t\t\trenderer: 'canvas'\r\n\t\t};\r\n\r\n\t\tvar now, start = Date.now();\r\n\t\tvar center = FSS.Vector3.create();\r\n\t\tvar attractor = FSS.Vector3.create();\r\n\t\tvar container = document.getElementById('canvas');\r\n\t\tvar output = document.getElementById('canvas');\r\n\t\tvar renderer, scene, mesh, geometry, material;\r\n\t\tvar canvasRenderer;\r\n\t\tvar gui, autopilotController;\r\n\r\n\t\tfunction initialise() {\r\n\r\n\t\t\tcreateRenderer();\r\n\t\t\tcreateScene();\r\n\t\t\tcreateMesh();\r\n\t\t\tcreateLights();\r\n\t\t\taddEventListeners();\r\n\t\t\tresize(container.offsetWidth, container.offsetHeight);\r\n\t\t\tanimate();\r\n\r\n\t\t}\r\n\r\n\t\tfunction createRenderer() {\r\n\r\n\t\t\tcanvasRenderer = new FSS.CanvasRenderer();\r\n\t\t\tsetRenderer(RENDER.renderer);\r\n\r\n\t\t}\r\n\r\n\t\tfunction setRenderer(index) {\r\n\r\n\t\t\tif (renderer) {\r\n\t\t\t\toutput.removeChild(renderer.element);\r\n\t\t\t}\r\n\r\n\t\t\trenderer = canvasRenderer;\r\n\r\n\t\t\trenderer.setSize(container.offsetWidth, container.offsetHeight);\r\n\t\t\toutput.appendChild(renderer.element);\r\n\r\n\t\t}\r\n\r\n\t\tfunction createScene() {\r\n\t\t\tscene = new FSS.Scene();\r\n\t\t}\r\n\r\n\t\tfunction createMesh() {\r\n\r\n\t\t\tscene.remove(mesh);\r\n\t\t\trenderer.clear();\r\n\t\t\tgeometry = new FSS.Plane(MESH.width * renderer.width, MESH.height * renderer.height, MESH.segments, MESH.slices);\r\n\t\t\tmaterial = new FSS.Material(MESH.ambient, MESH.diffuse);\r\n\t\t\tmesh = new FSS.Mesh(geometry, material);\r\n\t\t\tscene.add(mesh);\r\n\r\n\t\t\t// Augment vertices for animation\r\n\t\t\tvar v, vertex;\r\n\t\t\tfor (v = geometry.vertices.length - 1; v >= 0; v--) {\r\n\r\n\t\t\t\tvertex = geometry.vertices[v];\r\n\t\t\t\tvertex.anchor = FSS.Vector3.clone(vertex.position);\r\n\t\t\t\tvertex.step = FSS.Vector3.create(\r\n\t\t\t\t\tMath.randomInRange(0.2, 1.0),\r\n\t\t\t\t\tMath.randomInRange(0.2, 1.0),\r\n\t\t\t\t\tMath.randomInRange(0.2, 1.0)\r\n\t\t\t\t);\r\n\t\t\t\tvertex.time = Math.randomInRange(0, Math.PIM2);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction createLights() {\r\n\r\n\t\t\tvar l, light;\r\n\t\t\tfor (l = scene.lights.length - 1; l >= 0; l--) {\r\n\r\n\t\t\t\tlight = scene.lights[l];\r\n\t\t\t\tscene.remove(light);\r\n\r\n\t\t\t}\r\n\r\n\t\t\trenderer.clear();\r\n\r\n\t\t\tfor (l = 0; l < LIGHT.count; l++) {\r\n\r\n\t\t\t\tlight = new FSS.Light(LIGHT.ambient, LIGHT.diffuse);\r\n\t\t\t\tlight.ambientHex = light.ambient.format();\r\n\t\t\t\tlight.diffuseHex = light.diffuse.format();\r\n\t\t\t\tscene.add(light);\r\n\r\n\t\t\t\t// Augment light for animation\r\n\t\t\t\tlight.mass = Math.randomInRange(0.5, 1);\r\n\t\t\t\tlight.velocity = FSS.Vector3.create();\r\n\t\t\t\tlight.acceleration = FSS.Vector3.create();\r\n\t\t\t\tlight.force = FSS.Vector3.create();\r\n\r\n\t\t\t\t// Ring SVG Circle\r\n\t\t\t\tlight.ring = document.createElementNS(FSS.SVGNS, 'circle');\r\n\t\t\t\tlight.ring.setAttributeNS(null, 'stroke', light.ambientHex);\r\n\t\t\t\tlight.ring.setAttributeNS(null, 'stroke-width', '0.5');\r\n\t\t\t\tlight.ring.setAttributeNS(null, 'fill', 'none');\r\n\t\t\t\tlight.ring.setAttributeNS(null, 'r', '10');\r\n\r\n\t\t\t\t// Core SVG Circle\r\n\t\t\t\tlight.core = document.createElementNS(FSS.SVGNS, 'circle');\r\n\t\t\t\tlight.core.setAttributeNS(null, 'fill', light.diffuseHex);\r\n\t\t\t\tlight.core.setAttributeNS(null, 'r', '4');\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction resize(width, height) {\r\n\r\n\t\t\trenderer.setSize(width, height);\r\n\t\t\tFSS.Vector3.set(center, renderer.halfWidth, renderer.halfHeight);\r\n\t\t\tcreateMesh();\r\n\r\n\t\t}\r\n\r\n\t\tfunction animate() {\r\n\r\n\t\t\tnow = Date.now() - start;\r\n\t\t\tupdate();\r\n\t\t\trender();\r\n\t\t\trequestAnimationFrame(animate);\r\n\r\n\t\t}\r\n\r\n\t\tfunction update() {\r\n\r\n\t\t\tvar ox, oy, oz, l, light, v, vertex, offset = MESH.depth / 2;\r\n\r\n\t\t\t// Update Bounds\r\n\t\t\tFSS.Vector3.copy(LIGHT.bounds, center);\r\n\t\t\tFSS.Vector3.multiplyScalar(LIGHT.bounds, LIGHT.xyScalar);\r\n\r\n\t\t\t// Update Attractor\r\n\t\t\tFSS.Vector3.setZ(attractor, LIGHT.zOffset);\r\n\r\n\t\t\t// Overwrite the Attractor position\r\n\t\t\tif (LIGHT.autopilot) {\r\n\t\t\t\tox = Math.sin(LIGHT.step[0] * now * LIGHT.speed);\r\n\t\t\t\toy = Math.cos(LIGHT.step[1] * now * LIGHT.speed);\r\n\t\t\t\tFSS.Vector3.set(attractor,\r\n\t\t\t\t\tLIGHT.bounds[0] * ox,\r\n\t\t\t\t\tLIGHT.bounds[1] * oy,\r\n\t\t\t\t\tLIGHT.zOffset);\r\n\t\t\t}\r\n\r\n\t\t\t// Animate Lights\r\n\t\t\tfor (l = scene.lights.length - 1; l >= 0; l--) {\r\n\r\n\t\t\t\tlight = scene.lights[l];\r\n\r\n\t\t\t\t// Reset the z position of the light\r\n\t\t\t\tFSS.Vector3.setZ(light.position, LIGHT.zOffset);\r\n\r\n\t\t\t\t// Calculate the force Luke!\r\n\t\t\t\tvar D = Math.clamp(FSS.Vector3.distanceSquared(light.position, attractor), LIGHT.minDistance, LIGHT.maxDistance);\r\n\t\t\t\tvar F = LIGHT.gravity * light.mass / D;\r\n\t\t\t\tFSS.Vector3.subtractVectors(light.force, attractor, light.position);\r\n\t\t\t\tFSS.Vector3.normalise(light.force);\r\n\t\t\t\tFSS.Vector3.multiplyScalar(light.force, F);\r\n\r\n\t\t\t\t// Update the light position\r\n\t\t\t\tFSS.Vector3.set(light.acceleration);\r\n\t\t\t\tFSS.Vector3.add(light.acceleration, light.force);\r\n\t\t\t\tFSS.Vector3.add(light.velocity, light.acceleration);\r\n\t\t\t\tFSS.Vector3.multiplyScalar(light.velocity, LIGHT.dampening);\r\n\t\t\t\tFSS.Vector3.limit(light.velocity, LIGHT.minLimit, LIGHT.maxLimit);\r\n\t\t\t\tFSS.Vector3.add(light.position, light.velocity);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Animate Vertices\r\n\t\t\tfor (v = geometry.vertices.length - 1; v >= 0; v--) {\r\n\r\n\t\t\t\tvertex = geometry.vertices[v];\r\n\t\t\t\tox = Math.sin(vertex.time + vertex.step[0] * now * MESH.speed);\r\n\t\t\t\toy = Math.cos(vertex.time + vertex.step[1] * now * MESH.speed);\r\n\t\t\t\toz = Math.sin(vertex.time + vertex.step[2] * now * MESH.speed);\r\n\t\t\t\tFSS.Vector3.set(vertex.position,\r\n\t\t\t\t\tMESH.xRange * geometry.segmentWidth * ox,\r\n\t\t\t\t\tMESH.yRange * geometry.sliceHeight * oy,\r\n\t\t\t\t\tMESH.zRange * offset * oz - offset);\r\n\t\t\t\tFSS.Vector3.add(vertex.position, vertex.anchor);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Set the Geometry to dirty\r\n\t\t\tgeometry.dirty = true;\r\n\r\n\t\t}\r\n\r\n\t\tfunction render() {\r\n\t\t\trenderer.render(scene);\r\n\r\n\t\t\t// Draw Lights\r\n\t\t\tif (LIGHT.draw) {\r\n\r\n\t\t\t\tvar l, lx, ly, light;\r\n\t\t\t\tfor (l = scene.lights.length - 1; l >= 0; l--) {\r\n\r\n\t\t\t\t\tlight = scene.lights[l];\r\n\t\t\t\t\tlx = light.position[0];\r\n\t\t\t\t\tly = light.position[1];\r\n\t\t\t\t\trenderer.context.lineWidth = 0.5;\r\n\t\t\t\t\trenderer.context.beginPath();\r\n\t\t\t\t\trenderer.context.arc(lx, ly, 10, 0, Math.PIM2);\r\n\t\t\t\t\trenderer.context.strokeStyle = light.ambientHex;\r\n\t\t\t\t\trenderer.context.stroke();\r\n\t\t\t\t\trenderer.context.beginPath();\r\n\t\t\t\t\trenderer.context.arc(lx, ly, 4, 0, Math.PIM2);\r\n\t\t\t\t\trenderer.context.fillStyle = light.diffuseHex;\r\n\t\t\t\t\trenderer.context.fill();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction addEventListeners() {\r\n\t\t\twindow.addEventListener('resize', onWindowResize);\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(event) {\r\n\t\t\tFSS.Vector3.set(attractor, event.x, renderer.height - event.y);\r\n\t\t\tFSS.Vector3.subtract(attractor, center);\r\n\t\t}\r\n\r\n\t\tfunction onWindowResize(event) {\r\n\t\t\tresize(container.offsetWidth, container.offsetHeight);\r\n\t\t\trender();\r\n\t\t}\r\n\r\n\t\tinitialise();\r\n\r\n\r\n\t\tif (canvas.getContext) {\r\n\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\tvar left = true;\r\n\r\n\t\t\tcanvas.height = screen.height - 60;\r\n\t\t\tcanvas.width = screen.width + 20;\r\n\r\n\t\t\tinitialize();\r\n\t\t\tinitialize();\r\n\r\n\t\t\tvar timer = setInterval(function () {\r\n\r\n\t\t\t\tfor (var i = 1; i <= 1000; i++) {\r\n\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tif (left) {\r\n\t\t\t\t\t\tctx.moveTo(0, randomize(canvas.height + 10));\r\n\t\t\t\t\t\tleft = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tctx.moveTo(randomize(canvas.width + 10), 0);\r\n\t\t\t\t\t\tleft = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.lineTo(randomize(canvas.width + 50), randomize(canvas.height + 50));\r\n\t\t\t\t\tctx.lineTo(randomize(canvas.width + 50), randomize(canvas.height + 50));\r\n\t\t\t\t\tctx.fillStyle = getRndColor();\r\n\t\t\t\t\tctx.fill();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, 5000);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// GLITCH BACKGROUND FUNCTION\r\n\tfunction glitchBackground() {\r\n\r\n\t\tvar bgImage = \"background-image: url('\" + option_hero_background_glitch_image + \"')\";\r\n\t\t$(\".hero .level-2 .bg-image\").append('<div class=\"glitch-img\" style=\"' + bgImage + '\"></div>');\r\n\r\n\t\t$(\".glitch-img\").mgGlitch({\r\n\t\t\tdestroy: false, // set 'true' to stop the plugin\r\n\t\t\tglitch: true, // set 'false' to stop glitching\r\n\t\t\tscale: true, // set 'false' to stop scaling\r\n\t\t\tblend: true, // set 'false' to stop glitch blending\r\n\t\t\tblendModeType: 'hue', // select blend mode type\r\n\t\t\tglitch1TimeMin: 600, // set min time for glitch 1 elem\r\n\t\t\tglitch1TimeMax: 900, // set max time for glitch 1 elem\r\n\t\t\tglitch2TimeMin: 10, // set min time for glitch 2 elem\r\n\t\t\tglitch2TimeMax: 115, // set max time for glitch 2 elem\r\n\t\t\tzIndexStart: 8, // because of absolute position, set z-index base value\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// CHECK FOR ACTIVE EFFECTS\r\n\tfunction checkforBackgroundEffects() {\r\n\r\n\t\tif (option_hero_gravity_effect === \"on\") {\r\n\r\n\t\t\tgravityBackgroundEffect();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// LOAD SCRIPT FUNCTION\r\n\tfunction loadScript(url, callback) {\r\n\r\n\t\tvar head = document.getElementsByTagName('head')[0];\r\n\t\tvar script = document.createElement('script');\r\n\t\tscript.type = 'text/javascript';\r\n\t\tscript.src = url;\r\n\t\tscript.onreadystatechange = callback;\r\n\t\tscript.onload = callback;\r\n\t\thead.appendChild(script);\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// BACKGROUND CONTROLLER\r\n\tswitch (option_hero_background_mode) {\r\n\r\n\t\tcase \"image\":\r\n\r\n\t\t\timageBackground();\r\n\t\t\tcheckforBackgroundEffects();\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"slider\":\r\n\r\n\t\t\tsliderBackground();\r\n\t\t\tcheckforBackgroundEffects();\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"kenburns\":\r\n\r\n\t\t\tkenburnsBackground();\r\n\t\t\tcheckforBackgroundEffects();\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"youtube\":\r\n\r\n\t\t\tif (jQuery.browser.mobile) {\r\n\r\n\t\t\t\timageBackground();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tyoutubeBackground();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcheckforBackgroundEffects();\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"color\":\r\n\r\n\t\t\tcolorBackground();\r\n\t\t\tcheckforBackgroundEffects();\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"gradient\":\r\n\r\n\t\t\tgradientBackground();\r\n\t\t\tcheckforBackgroundEffects();\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"sphere\":\r\n\r\n\t\t\tloadScript(\"assets/js/plugins/three.min.js\", function () {\r\n\t\t\t\tcanvasSphereBackground();\r\n\t\t\t});\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"waves\":\r\n\r\n\t\t\tloadScript(\"assets/js/plugins/three.min.js\", function () {\r\n\t\t\t\tcanvasWavesBackground();\r\n\t\t\t});\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"mesh\":\r\n\r\n\t\t\tmeshBackground();\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"space\":\r\n\r\n\t\t\tspaceBackground();\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"abstract\":\r\n\r\n\t\t\tloadScript(\"assets/js/plugins/fss.min.js\", function () {\r\n\t\t\t\tabstractBackground();\r\n\t\t\t});\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"glitch\":\r\n\r\n\t\t\tglitchBackground();\r\n\t\t\tcheckforBackgroundEffects();\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"custom\":\r\n\r\n\t\t\tcustomBackground();\r\n\t\t\tcheckforBackgroundEffects();\r\n\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\r\n\t\t\talert(\"Error! No background is set or something went wrong\");\r\n\t\t\tconsole.log(\"Error! No background is set or something went wrong\");\r\n\r\n\t\t\tbreak;\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n\t/** 3. EFFECT\r\n\t*******************************************************************/\r\n\r\n\t// 2D HOVER EFFECT\r\n\tif (option_hero_parallax_hover_effect == \"on\") {\r\n\r\n\t\t// PARALLAX HOVER EFFECT\r\n\t\tvar $scene = $(\".hero\").parallax({\r\n\r\n\t\t\tscalarX: 24,\r\n\t\t\tscalarY: 15,\r\n\t\t\tfrictionX: 0.1,\r\n\t\t\tfrictionY: 0.1,\r\n\r\n\t\t});\r\n\r\n\t\t// DISABLE OR ENABLE PARALLAX ON MOUSEENTER MOUSELEAVE\r\n\t\t$(\".hero\").hover(\r\n\r\n\t\t\tfunction () {\r\n\r\n\t\t\t\t$scene.parallax(\"enable\");\r\n\r\n\t\t\t}, function () {\r\n\r\n\t\t\t\t$scene.parallax(\"disable\");\r\n\r\n\t\t\t}\r\n\r\n\t\t);\r\n\r\n\t}\r\n\r\n\r\n\t// GRAVITY BACKGROUND EFFECT\r\n\tfunction gravityBackgroundEffect() {\r\n\r\n\t\tfunction Constellation(canvas, options) {\r\n\r\n\t\t\tvar screenpointSplitt = 14000,\r\n\t\t\t\tmovingSpeed = 0.2,\r\n\t\t\t\tviewportWidth = $(\".hero .level-1\").width(),\r\n\t\t\t\tviewportHeight = $(\".hero .level-1\").height(),\r\n\t\t\t\tnbCalculated = Math.round(viewportHeight * viewportWidth / screenpointSplitt),\r\n\t\t\t\t$canvas = $(canvas),\r\n\t\t\t\tcontext = canvas.getContext(\"2d\"),\r\n\t\t\t\tdefaults = {\r\n\t\t\t\t\tstar: { color: \"rgba(255, 255, 255, .65)\", width: 1 },\r\n\t\t\t\t\tline: { color: \"rgba(255, 255, 255, .65)\", width: 0.2 },\r\n\t\t\t\t\tposition: { x: 0, y: 0 },\r\n\t\t\t\t\twidth: viewportWidth,\r\n\t\t\t\t\theight: viewportHeight,\r\n\t\t\t\t\tvelocity: movingSpeed,\r\n\t\t\t\t\tlength: nbCalculated,\r\n\t\t\t\t\tdistance: 120,\r\n\t\t\t\t\tradius: 200,\r\n\t\t\t\t\tstars: []\r\n\t\t\t\t},\r\n\r\n\t\t\t\tconfig = $.extend(true, {}, defaults, options);\r\n\r\n\t\t\tfunction Star() {\r\n\r\n\t\t\t\tthis.x = Math.random() * canvas.width;\r\n\t\t\t\tthis.y = Math.random() * canvas.height;\r\n\r\n\t\t\t\tthis.vx = (config.velocity - (Math.random() * 0.5));\r\n\t\t\t\tthis.vy = (config.velocity - (Math.random() * 0.5));\r\n\r\n\t\t\t\tthis.radius = Math.random() * config.star.width;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tStar.prototype = {\r\n\r\n\t\t\t\tcreate: function () {\r\n\r\n\t\t\t\t\tcontext.beginPath();\r\n\t\t\t\t\tcontext.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\r\n\t\t\t\t\tcontext.fill();\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tanimate: function () {\r\n\r\n\t\t\t\t\tvar i;\r\n\t\t\t\t\tfor (i = 0; i < config.length; i++) {\r\n\r\n\t\t\t\t\t\tvar star = config.stars[i];\r\n\r\n\t\t\t\t\t\tif (star.y < 0 || star.y > canvas.height) {\r\n\r\n\t\t\t\t\t\t\tstar.vx = star.vx;\r\n\t\t\t\t\t\t\tstar.vy = - star.vy;\r\n\r\n\t\t\t\t\t\t} else if (star.x < 0 || star.x > canvas.width) {\r\n\r\n\t\t\t\t\t\t\tstar.vx = - star.vx;\r\n\t\t\t\t\t\t\tstar.vy = star.vy;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tstar.x += star.vx;\r\n\t\t\t\t\t\tstar.y += star.vy;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tline: function () {\r\n\r\n\t\t\t\t\tvar length = config.length,\r\n\t\t\t\t\t\tiStar,\r\n\t\t\t\t\t\tjStar,\r\n\t\t\t\t\t\ti,\r\n\t\t\t\t\t\tj;\r\n\r\n\t\t\t\t\tfor (i = 0; i < length; i++) {\r\n\r\n\t\t\t\t\t\tfor (j = 0; j < length; j++) {\r\n\r\n\t\t\t\t\t\t\tiStar = config.stars[i];\r\n\t\t\t\t\t\t\tjStar = config.stars[j];\r\n\r\n\t\t\t\t\t\t\tif (\r\n\r\n\t\t\t\t\t\t\t\t(iStar.x - jStar.x) < config.distance &&\r\n\t\t\t\t\t\t\t\t(iStar.y - jStar.y) < config.distance &&\r\n\t\t\t\t\t\t\t\t(iStar.x - jStar.x) > - config.distance &&\r\n\t\t\t\t\t\t\t\t(iStar.y - jStar.y) > - config.distance\r\n\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tif (\r\n\r\n\t\t\t\t\t\t\t\t\t(iStar.x - config.position.x) < config.radius &&\r\n\t\t\t\t\t\t\t\t\t(iStar.y - config.position.y) < config.radius &&\r\n\t\t\t\t\t\t\t\t\t(iStar.x - config.position.x) > - config.radius &&\r\n\t\t\t\t\t\t\t\t\t(iStar.y - config.position.y) > - config.radius\r\n\r\n\t\t\t\t\t\t\t\t) {\r\n\r\n\t\t\t\t\t\t\t\t\tcontext.beginPath();\r\n\t\t\t\t\t\t\t\t\tcontext.moveTo(iStar.x, iStar.y);\r\n\t\t\t\t\t\t\t\t\tcontext.lineTo(jStar.x, jStar.y);\r\n\t\t\t\t\t\t\t\t\tcontext.stroke();\r\n\t\t\t\t\t\t\t\t\tcontext.closePath();\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\tthis.createStars = function () {\r\n\r\n\t\t\t\tvar length = config.length,\r\n\t\t\t\t\tstar,\r\n\t\t\t\t\ti;\r\n\r\n\t\t\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\tfor (i = 0; i < length; i++) {\r\n\r\n\t\t\t\t\tconfig.stars.push(new Star());\r\n\t\t\t\t\tstar = config.stars[i];\r\n\r\n\t\t\t\t\tstar.create();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstar.line();\r\n\t\t\t\tstar.animate();\r\n\t\t\t\tconfig.stars.splice(length, length);\r\n\r\n\t\t\t};\r\n\r\n\t\t\tthis.setCanvas = function () {\r\n\r\n\t\t\t\tcanvas.width = config.width;\r\n\t\t\t\tcanvas.height = config.height;\r\n\r\n\t\t\t\tcontext.fillStyle = config.star.color;\r\n\t\t\t\tcontext.strokeStyle = config.line.color;\r\n\t\t\t\tcontext.lineWidth = config.line.width;\r\n\r\n\t\t\t\tif (!options || !options.hasOwnProperty(\"position\")) {\r\n\r\n\t\t\t\t\tconfig.position = {\r\n\r\n\t\t\t\t\t\tx: canvas.width * 0.5,\r\n\t\t\t\t\t\ty: canvas.height * 0.5\r\n\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\tthis.loop = function (callback) {\r\n\r\n\t\t\t\tcallback();\r\n\r\n\t\t\t\twindow.requestAnimationFrame(function () {\r\n\r\n\t\t\t\t\tthis.loop(callback);\r\n\r\n\t\t\t\t}.bind(this));\r\n\r\n\t\t\t};\r\n\r\n\t\t\tthis.bind = function () {\r\n\r\n\t\t\t\t$(window).on(\"mousemove\", function (e) {\r\n\r\n\t\t\t\t\tconfig.position.x = e.pageX - $canvas.offset().left;\r\n\t\t\t\t\tconfig.position.y = e.pageY - $canvas.offset().top;\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t};\r\n\r\n\t\t\tthis.init = function () {\r\n\r\n\t\t\t\tthis.setCanvas();\r\n\t\t\t\tthis.loop(this.createStars);\r\n\t\t\t\tthis.bind();\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t$.fn.constellation = function (options) {\r\n\r\n\t\t\treturn this.each(function () {\r\n\r\n\t\t\t\tvar c = new Constellation(this, options);\r\n\t\t\t\tc.init();\r\n\r\n\t\t\t});\r\n\r\n\t\t};\r\n\r\n\r\n\t\t$(\"#canvas canvas\").constellation({});\r\n\r\n\r\n\r\n\t\tvar waitForFinalEvent = (function () {\r\n\r\n\t\t\tvar timers = {};\r\n\r\n\t\t\treturn function (callback, ms, uniqueId) {\r\n\r\n\t\t\t\tif (!uniqueId) {\r\n\t\t\t\t\tuniqueId = \"Don't call this twice without a uniqueId\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (timers[uniqueId]) {\r\n\t\t\t\t\tclearTimeout(timers[uniqueId]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttimers[uniqueId] = setTimeout(callback, ms);\r\n\r\n\t\t\t};\r\n\r\n\t\t})();\r\n\r\n\t\t$(window).resize(function () {\r\n\r\n\t\t\twaitForFinalEvent(function () {\r\n\t\t\t\t$(\"#canvas canvas\").constellation({});\r\n\t\t\t}, 500, \"some unique string\");\r\n\r\n\t\t});\r\n\r\n\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n\t/**\t4. CYCLE\r\n\t *****************************************************/\r\n\r\n\t// VARIBABLES\r\n\tvar cycleDuration = 800;\r\n\tvar cycleDelay = 6000;\r\n\r\n\r\n\r\n\t// ADAPT DELAY TO SLIDER\r\n\tif (option_hero_background_mode === \"slider\") {\r\n\r\n\t\tcycleDuration = option_hero_background_slider_transitionDuration;\r\n\t\tcycleDelay = option_hero_background_slider_delay;\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// ADAPT DELAY TO KENBURNS SLIDER\r\n\tif (option_hero_background_mode === \"kenburns\") {\r\n\r\n\t\tcycleDuration = option_hero_background_kenburns_transitionDuration;\r\n\t\tcycleDelay = option_hero_background_kenburns_delay;\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// CYCLE SLIDESHOW\r\n\t$(\"#cycle\").cycle({\r\n\r\n\t\tfx: \"scrollVert\",\r\n\t\ttimeout: cycleDelay,\r\n\t\tdelay: 0,\r\n\t\tautoHeight: \"container\",\r\n\t\tspeed: cycleDuration,\r\n\t\tslides: \".slide\",\r\n\t\tlog: false\r\n\r\n\t});\r\n\r\n\r\n\r\n});"]}